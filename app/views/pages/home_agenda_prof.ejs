<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuração de agenda</title>

    <!-- Link dos ícones fontawesome -->
    <script src="https://kit.fontawesome.com/db9bc09a1d.js" crossorigin="anonymous"></script>

    <!-- LINK DOS ICONES DA BARRA NAV -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!--link do arquivo js-->
    <link rel="stylesheet" href="../css/barranav.css">


    <!--link do arquivo css da NAV e do footer-->

    <link rel="stylesheet" href="../css/footer.css">

    <link rel="stylesheet" href="../css/barranav.css">


    <!-- CSS da página de agenda -->
    <link rel="stylesheet" href="../css/agendahome_prof.css">



</head>

</head>

<body>

    <header>
        <!--barra de navegação - início -->
        <nav class="menu-desktop">

            <!--Espaço para a logo-->
            <section class="menu-logo">
                <a href="/profissional/homepro">
                    <img class="logo logo-desktop" src="/imagens/logo-bblt.png" alt="Logo InovaCare">
                    <img class="logo logo-tablet" src="/imagens/logo-extenso.png" alt="Logo InovaCare">
                    <img class="logo logo-mobile" src="/imagens/logo-borboleta.png" alt="Logo InovaCare">
                </a>
            </section>

            <!--Menu profissional-->
            <ul class="menu-list">
                <li><a class="agenda" href="/profissional/home_agenda_prof">Minha Agenda</a></li>
                <li><a class="consultas" href="/consultas">Consultas</a></li>
                <li><a class="pacientes" href="/pacientes">Pacientes</a></li>
            </ul>


            <ul class="menu-list-direita">
                <li><a href="/perfil/prof" class="icon-perfil" aria-label="Perfil"><i class="bi bi-person-circle"></i></a></li>
                <li class="dropdown">
                    <button class="icon-perfil" aria-label="Menu"><i class="bi bi-three-dots-vertical"></i></button>
                    <section class="dropdown-content">
                        <a href="/sair" class="btn-sair">Sair</a>
                    </section>
                </li>
            </ul>

        </nav>

        <nav class="mobile-menu">
            <section class="menu-logo">
                <a href="/profissional/homepro">
                    <img class="logo logo-desktop" src="imagens/logo-bblt.png" alt="Logo InovaCare">
                    <img class="logo logo-tablet" src="imagens/logo-extenso.png" alt="Logo InovaCare">
                    <img class="logo logo-mobile" src="imagens/logo-borboleta.png" alt="Logo InovaCare">
                </a>
            </section>

            <ul class="menu-actions">
                <li><a href="/perfil/prof" class="icon-perfil" aria-label="Perfil"><i class="bi bi-person-circle"></i></a></li>
                <li><button class="hamburguer" onclick="toggleMenu()" aria-label="Menu"></button></li>
            </ul>

            <!-- Menu suspenso do hambúrguer -->
            <ul id="hamburger-menu" class="hamburger-menu-content">
                <li><a href="/profissional/home_agenda_prof">Minha Agenda</a></li>
                <li><a href="/consultas">Consultas</a></li>
                <li><a href="/pacientes">Pacientes</a></li>
                <li><a href="/sair" class="btn-sair-mobile">Sair</a></li>
            </ul>
        </nav>

        <script>
            function toggleMenu() {
                const menu = document.getElementById("hamburger-menu");
                menu.style.display = menu.style.display === "block" ? "none" : "block";
            }
        </script>


        <!--barra de navegação - fim ^^^ -->


    </header>

    <!-- titulo geral da página + botão de voltar -->

    <section class="container-titulo">
        <a href="/profissional/homepro" class="bt-voltar">
            <i class="fas fa-arrow-left"></i> <!-- Opção com Font Awesome -->
            <!-- ou -->

        </a>
        <h2 class="titulo-geral titulo-com-seta">Configurações de agenda</h2>

    </section>


    <!-- Bloco geral de conteúdo -->
    <section class="container-geral">

        <!-- Título + botão para criar agenda -->
        <section class="bloco-section">



            <!-- titulo da sessão -->
            <h2 class="primary-title"><i class="fa-solid fa-gear"></i>Configure sua agenda</h2>


            <!-- Legenda informativa explicando para o usuário -->
            <section class="info-box">

                <i class="fas fa-circle-info"></i>
                <p>Atenção, profissional: certifique-se de ter configurado sua tabela de preços na página de perfil
                    antes de montar sua agenda</p>

            </section>

            <!-- botão para criara  agenda -->
            <a href="/profissional/config_agenda_prof"><button class="btn-avancar">Criar nova agenda</button></a>

        </section>


        <!-- Título + form para seelcionar os filtros a partir do dia da semana -->
        <section class="bloco-section">

            <!-- titulo da sessão -->
            <h2 class="primary-title"><i class="fas fa-calendar-day"></i>Predefinições de agenda</h2>

            <form id="filtroagenda" action="/profissional/filtroAgenda" method="post">

                <!-- Caixa de seleção para a escolha do dia da semana -->
                <section class="select-container">

                    <select id="idsemanadiahome" name="semanadia" required="">

                        <option value="" disabled="" selected="" hidden="">Selecione o dia da semana</option>
                        <!--Legenda da caixa de seleção-->
                        <option value="0" <%= semanadia == 0 ? "selected" : "" %>>Todos</option>
                        <option value="1" <%= semanadia == 1 ? "selected" : "" %>>Domingo</option>
                        <option value="2" <%= semanadia == 2 ? "selected" : "" %> >Segunda-Feira</option>
                        <option value="3" <%= semanadia == 3 ? "selected" : "" %> >Terça-Feira</option>
                        <option value="4" <%= semanadia == 4 ? "selected" : "" %> >Quarta-Feira</option>
                        <option value="5" <%= semanadia == 5 ? "selected" : "" %> >Quinta-Feira</option>
                        <option value="6" <%= semanadia == 6 ? "selected" : "" %> >Sexta-Feira</option>
                        <option value="7" <%= semanadia == 7 ? "selected" : "" %>>Sábado</option>

                    </select>



                </section>

                <input type="submit" class="btn-avancar" value="Buscar">

            </form>


        </section>


        <!-- Título + blocos que mostram as configurações de agenda  -->
        <section class="bloco-filtro bloco-section" id="blocos-filtro">

  <% if (agendas && agendas.length > 0) { %>
    <% agendas.forEach((agenda) => { %>

      <section class="container-filtro">

        <!-- Dia da semana -->
        <h2 class="text-filtro">
          <% 
            const diasSemana = ["Domingo","Segunda-Feira","Terça-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sábado"];
            const diaIndex = Number(agenda.dia_semana);
          %>
          <%= diasSemana[diaIndex - 1] || "Dia não definido" %>
        </h2>

        <!-- Modalidade -->
        <section class="info-agenda">
          <h2 class="text-infogenda">Modalidade:</h2>
          <p>
            
        <% if (agenda.tipo_atendimento == 1) { %>
            Online
        <% } else if (agenda.tipo_atendimento == 2) { %>
            Domiciliar
        <% } else { %>
            Não definido
        <% } %></p>
        </section>

        <!-- Preço da consulta -->
        <section class="info-agenda">
          <h2 class="text-infogenda">Valor da consulta:</h2>
          <p><%= new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(agenda.preco_base) %></p>
        </section>

        <!-- Taxa da consulta -->
        <section class="info-agenda">
          <h2 class="text-infogenda">Taxa da consulta:</h2>
          <p><%= new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(agenda.taxa_locomocao) %></p>
        </section>


        <!-- Horário de início -->
        <section class="info-agenda">
          <h2 class="text-infogenda">Horário de início:</h2>
          <p><%= agenda.hr_inicio %></p>
        </section>

        <!-- Horário de término -->
        <section class="info-agenda">
          <h2 class="text-infogenda">Horário de término:</h2>
          <p><%= agenda.hr_fim %></p>
        </section>

        <!-- Pausas -->
        <section class="info-pausa">
          <h2 class="text-infogenda" id="text-pausas">Pausas definidas:</h2>

          <% if (agenda.pausas && agenda.pausas.length > 0) { %>
            <table>
              <thead>
                <tr>
                  <th>Início</th>
                  <th>Término</th>
                </tr>
              </thead>
              <tbody>
                <% agenda.pausas.forEach((pausa) => { %>
                  <tr>
                    <td><%= pausa.hr_inicio_pausa %></td>
                    <td><%= pausa.hr_fim_pausa %></td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          <% } else { %>
            <p>Sem pausas definidas</p>
          <% } %>

        </section>

        <!-- Botões -->
        <section class="agrupa-btn">
          <button class="btn-filtro">Editar</button>
          <button class="btn-filtro">Apagar</button>
        </section>

      </section>

    <% }) %>
  <% } else { %>
    <p>Nenhuma agenda encontrada no dia selecionado</p>
  <% } %>

</section>
    </section>


    <footer class="footer">

        <section class="footer-logo">
            <img class="footer-logo-desktop" src="/imagens/logo-bblt.png" alt="Logo da Empresa">
            <img class="footer-logo-mobile" src="/imagens/logo-extenso.png" alt="Logo da Empresa">
            <p class="footer-comentario">Oferecemos atendimento médico e terapêutico através das modalidades do
                atendimento online e domiciliar. Nosso objetivo é promover o acesso aos mais diversos serviços de
                saúde.
            </p>
        </section>

        <section class="footer-links">
            <h3 class="ttl-links">Explorar</h3>
            <ul class="links">
                <li><a href="#">Quem somos</a></li>
                <li><a href="#">FAQ</a></li>
                <li><a href="/especialidades">Especialidades</a></li>
                <li><a href="/consultas">Consultas</a></li>
            </ul>
        </section>

        <section class="footer-contato">
            <h3 class="ttl-contato">Contato</h3>
            <p class="nmr-contato">(11) 4002-8922</p>
        </section>

    </footer>


</body>

</html>